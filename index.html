<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>浙江传媒学院学籍卡填写验证</title>
    <style>
      body {
        font-family: 'Microsoft YaHei', sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        color: #333;
      }
      .container {
        max-width: 1000px;
        margin: 0 auto;
        background-color: #f9f9f9;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #0066cc;
        text-align: center;
        margin-bottom: 30px;
      }
      .form-section {
        margin-bottom: 20px;
        padding: 15px;
        background-color: white;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
      }
      .form-row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 10px;
      }
      .form-group {
        margin-right: 20px;
        margin-bottom: 10px;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        font-size: 14px;
      }
      input,
      select {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }
      input:focus,
      select:focus {
        outline: none;
        border-color: #0066cc;
        box-shadow: 0 0 5px rgba(0, 0, 204, 0.2);
      }
      .error {
        color: red;
        font-size: 12px;
        margin-top: 5px;
        display: none;
      }
      button {
        background-color: #0066cc;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px;
      }
      button:hover {
        background-color: #0055aa;
      }
      .result {
        margin-top: 20px;
        padding: 15px;
        border-radius: 4px;
        display: none;
      }
      .success {
        background-color: #dff0d8;
        color: #3c763d;
        border: 1px solid #d6e9c6;
      }
      .warning {
        background-color: #fcf8e3;
        color: #8a6d3b;
        border: 1px solid #faebcc;
      }
      .instructions {
        background-color: #e7f4ff;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
        font-size: 14px;
      }
      .instructions h3 {
        margin-top: 0;
        color: #0066cc;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
      }
      table,
      th,
      td {
        border: 1px solid #ddd;
      }
      th,
      td {
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
      .required:after {
        content: ' *';
        color: red;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>浙江传媒学院学籍卡填写验证</h1>

      <div class="instructions">
        <h3>填写说明</h3>
        <p>
          请按照以下要求填写学籍卡信息，系统会自动验证填写内容是否正确。带 *
          的为必填项。
        </p>
        <p>
          填写完成后点击"验证"按钮，系统会提示填写是否正确。如有错误，请根据提示修改。
        </p>
      </div>

      <form id="studentForm">
        <div class="form-section">
          <h2>基本信息</h2>
          <div class="form-row">
            <div class="form-group">
              <label for="college" class="required">学院</label>
              <select id="college" required>
                <option value="">请选择学院</option>
                <option value="媒体工程学院">媒体工程学院</option>
                <option value="其他学院">其他学院</option>
              </select>
              <div class="error" id="collegeError">请选择学院</div>
            </div>
            <div class="form-group">
              <label for="major" class="required">专业</label>
              <select id="major" required>
                <option value="">请选择专业</option>
                <option value="广播电视工程">广播电视工程</option>
                <option value="电子科学与技术">电子科学与技术</option>
                <option value="数字媒体技术">数字媒体技术</option>
                <option value="网络工程">网络工程</option>
                <option value="软件工程">软件工程</option>
                <option value="人工智能">人工智能</option>
              </select>
              <div class="error" id="majorError">请选择专业</div>
            </div>
            <div class="form-group">
              <label for="class" class="required">班级</label>
              <input
                type="text"
                id="class"
                placeholder="如:24广电1班"
                required
              />
              <div class="error" id="classError">请输入班级</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="studentId" class="required">学号</label>
              <input
                type="text"
                id="studentId"
                placeholder="请输入学号"
                required
              />
              <div class="error" id="studentIdError">请输入学号</div>
            </div>
            <div class="form-group">
              <label for="enrollmentDate" class="required">入学时间</label>
              <input type="date" id="enrollmentDate" required />
              <div class="error" id="enrollmentDateError">请选择入学时间</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h2>个人信息</h2>
          <div class="form-row">
            <div class="form-group">
              <label for="name" class="required">姓名</label>
              <input type="text" id="name" required />
              <div class="error" id="nameError">请输入姓名</div>
            </div>
            <div class="form-group">
              <label for="birthDate" class="required">出生年月</label>
              <input type="month" id="birthDate" required />
              <div class="error" id="birthDateError">请选择出生年月</div>
            </div>
            <div class="form-group">
              <label for="ethnicity" class="required">民族</label>
              <input type="text" id="ethnicity" required />
              <div class="error" id="ethnicityError">请输入民族</div>
            </div>
            <div class="form-group">
              <label for="gender" class="required">性别</label>
              <select id="gender" required>
                <option value="">请选择</option>
                <option value="男">男</option>
                <option value="女">女</option>
              </select>
              <div class="error" id="genderError">请选择性别</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="nativePlace" class="required">籍贯</label>
              <input
                type="text"
                id="nativePlace"
                placeholder="浙江省XX县"
                required
              />
              <div class="error" id="nativePlaceError">
                请输入籍贯，格式如：浙江省XX县
              </div>
            </div>
            <div class="form-group">
              <label for="politicalStatus" class="required">政治面貌</label>
              <select id="politicalStatus" required>
                <option value="">请选择</option>
                <option value="共青团员">共青团员</option>
                <option value="中共党员">中共党员</option>
                <option value="中共预备党员">中共预备党员</option>
                <option value="群众">群众</option>
              </select>
              <div class="error" id="politicalStatusError">请选择政治面貌</div>
            </div>
            <div class="form-group">
              <label for="partyDate">入党(团)时间</label>
              <input type="month" id="partyDate" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="educationLevel" class="required">学历层次</label>
              <input type="text" id="educationLevel" value="本科" readonly />
            </div>
            <div class="form-group">
              <label for="schoolSystem" class="required">学制</label>
              <select id="schoolSystem" required>
                <option value="">请选择</option>
                <option value="肆">肆</option>
                <option value="贰">贰</option>
              </select>
              <div class="error" id="schoolSystemError">请选择学制</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h2>身份信息</h2>
          <div class="form-row">
            <div class="form-group" style="width: 100%">
              <label for="idNumber" class="required">身份证号</label>
              <input
                type="text"
                id="idNumber"
                placeholder="18位身份证号码"
                required
                style="width: 300px"
              />
              <div class="error" id="idNumberError">
                请输入有效的18位身份证号码
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group" style="width: 100%">
              <label for="homeAddress" class="required">家庭住址</label>
              <input
                type="text"
                id="homeAddress"
                placeholder="XX省XX市XX区XX小区X幢X单元X号"
                required
                style="width: 500px"
              />
              <div class="error" id="homeAddressError">请输入详细家庭住址</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="householdRegistration" class="required"
                >户口所在地</label
              >
              <input
                type="text"
                id="householdRegistration"
                placeholder="XX市XX派出所"
                required
              />
              <div class="error" id="householdRegistrationError">
                请输入户口所在地派出所
              </div>
            </div>
            <div class="form-group">
              <label for="previousEducation" class="required">入学前学历</label>
              <input type="text" id="previousEducation" value="高中" readonly />
            </div>
            <div class="form-group">
              <label for="graduationSchool" class="required">毕业学校</label>
              <input type="text" id="graduationSchool" required />
              <div class="error" id="graduationSchoolError">请输入毕业学校</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="contact" class="required">联系方式</label>
              <input type="tel" id="contact" required />
              <div class="error" id="contactError">请输入有效的联系方式</div>
            </div>
            <div class="form-group">
              <label for="isFreshGraduate" class="required">是否应届</label>
              <select id="isFreshGraduate" required>
                <option value="">请选择</option>
                <option value="是">是</option>
                <option value="否">否</option>
              </select>
              <div class="error" id="isFreshGraduateError">请选择是否应届</div>
            </div>
            <div class="form-group">
              <label for="isMilitaryFamily">是否军烈属</label>
              <select id="isMilitaryFamily">
                <option value="">请选择</option>
                <option value="是">是</option>
                <option value="否">否</option>
              </select>
            </div>
            <div class="form-group">
              <label for="isOverseasChinese">是否华侨/港澳/台湾籍</label>
              <select id="isOverseasChinese">
                <option value="否">否</option>
                <option value="是">是</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h2>教育背景及社会经历</h2>
          <table id="educationBackground">
            <thead>
              <tr>
                <th>何年何月起</th>
                <th>何年何月止</th>
                <th>在何地和学校或何单位学习或工作</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><input type="month" class="startDate" required /></td>
                <td><input type="month" class="endDate" required /></td>
                <td>
                  <input
                    type="text"
                    class="school"
                    placeholder="XX省XX市XX学校"
                    required
                  />
                </td>
                <td><button type="button" class="removeRow">删除</button></td>
              </tr>
            </tbody>
          </table>
          <button type="button" id="addEducationRow">添加一行</button>
          <div class="error" id="educationError" style="display: none">
            请至少填写一条教育经历
          </div>
          <div
            class="error"
            id="educationContinuityError"
            style="display: none"
          >
            教育经历必须保持连贯性
          </div>
        </div>

        <div class="form-section">
          <h2>家庭成员和主要社会关系情况</h2>
          <table id="familyMembers">
            <thead>
              <tr>
                <th>称谓</th>
                <th>姓名</th>
                <th>政治面貌</th>
                <th>工作单位</th>
                <th>职务(职称)</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <select class="relation" required>
                    <option value="">请选择</option>
                    <option value="父亲">父亲</option>
                    <option value="母亲">母亲</option>
                    <option value="兄">兄</option>
                    <option value="姐">姐</option>
                    <option value="弟">弟</option>
                    <option value="妹">妹</option>
                    <option value="祖父">祖父</option>
                    <option value="祖母">祖母</option>
                    <option value="外祖父">外祖父</option>
                    <option value="外祖母">外祖母</option>
                  </select>
                </td>
                <td><input type="text" class="memberName" required /></td>
                <td>
                  <select class="memberPoliticalStatus" required>
                    <option value="">请选择</option>
                    <option value="共青团员">共青团员</option>
                    <option value="中共党员">中共党员</option>
                    <option value="中共预备党员">中共预备党员</option>
                    <option value="群众">群众</option>
                  </select>
                </td>
                <td><input type="text" class="memberWorkplace" required /></td>
                <td><input type="text" class="memberPosition" required /></td>
                <td>
                  <button type="button" class="removeFamilyRow">删除</button>
                </td>
              </tr>
            </tbody>
          </table>
          <button type="button" id="addFamilyRow">添加一行</button>
          <div class="error" id="familyError" style="display: none">
            请至少填写两位家庭成员
          </div>
        </div>

        <div class="form-section">
          <h2>入学考试成绩</h2>
          <table id="entranceScores">
            <thead>
              <tr>
                <th>科目</th>
                <th>成绩</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <input
                    type="text"
                    class="subject"
                    placeholder="如:语文"
                    required
                  />
                </td>
                <td>
                  <input
                    type="number"
                    class="score"
                    min="0"
                    max="150"
                    required
                  />
                </td>
                <td>
                  <button type="button" class="removeScoreRow">删除</button>
                </td>
              </tr>
            </tbody>
          </table>
          <button type="button" id="addScoreRow">添加一行</button>
          <div class="form-row">
            <div class="form-group">
              <label for="totalScore">总分</label>
              <input type="number" id="totalScore" min="0" />
            </div>
          </div>
        </div>

        <button type="button" id="validateButton">验证</button>

        <div id="resultMessage" class="result"></div>
      </form>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // 添加教育经历行
        document
          .getElementById('addEducationRow')
          .addEventListener('click', function () {
            const tbody = document.querySelector('#educationBackground tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                    <td><input type="month" class="startDate" required></td>
                    <td><input type="month" class="endDate" required></td>
                    <td><input type="text" class="school" placeholder="XX省XX市XX学校" required></td>
                    <td><button type="button" class="removeRow">删除</button></td>
                `;
            tbody.appendChild(newRow);

            // 添加删除事件
            newRow
              .querySelector('.removeRow')
              .addEventListener('click', function () {
                tbody.removeChild(newRow);
              });
          });

        // 添加家庭成员行
        document
          .getElementById('addFamilyRow')
          .addEventListener('click', function () {
            const tbody = document.querySelector('#familyMembers tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                    <td>
                        <select class="relation" required>
                            <option value="">请选择</option>
                            <option value="父亲">父亲</option>
                            <option value="母亲">母亲</option>
                            <option value="兄">兄</option>
                            <option value="姐">姐</option>
                            <option value="弟">弟</option>
                            <option value="妹">妹</option>
                            <option value="祖父">祖父</option>
                            <option value="祖母">祖母</option>
                            <option value="外祖父">外祖父</option>
                            <option value="外祖母">外祖母</option>
                        </select>
                    </td>
                    <td><input type="text" class="memberName" required></td>
                    <td>
                        <select class="memberPoliticalStatus" required>
                            <option value="">请选择</option>
                            <option value="共青团员">共青团员</option>
                            <option value="中共党员">中共党员</option>
                            <option value="中共预备党员">中共预备党员</option>
                            <option value="群众">群众</option>
                        </select>
                    </td>
                    <td><input type="text" class="memberWorkplace" required></td>
                    <td><input type="text" class="memberPosition" required></td>
                    <td><button type="button" class="removeFamilyRow">删除</button></td>
                `;
            tbody.appendChild(newRow);

            // 添加删除事件
            newRow
              .querySelector('.removeFamilyRow')
              .addEventListener('click', function () {
                tbody.removeChild(newRow);
              });
          });

        // 添加成绩行
        document
          .getElementById('addScoreRow')
          .addEventListener('click', function () {
            const tbody = document.querySelector('#entranceScores tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                    <td><input type="text" class="subject" placeholder="如:语文" required></td>
                    <td><input type="number" class="score" min="0" max="150" required></td>
                    <td><button type="button" class="removeScoreRow">删除</button></td>
                `;
            tbody.appendChild(newRow);

            // 添加删除事件
            newRow
              .querySelector('.removeScoreRow')
              .addEventListener('click', function () {
                tbody.removeChild(newRow);
              });
          });

        // 验证表单
        document
          .getElementById('validateButton')
          .addEventListener('click', function () {
            // 重置所有错误提示
            const errors = document.querySelectorAll('.error');
            errors.forEach((error) => {
              error.style.display = 'none';
            });

            let isValid = true;

            // 验证必填字段
            const requiredInputs = document.querySelectorAll('[required]');
            requiredInputs.forEach((input) => {
              if (!input.value.trim()) {
                const errorId = input.id
                  ? input.id + 'Error'
                  : input.className + 'Error';
                const errorElement = document.getElementById(errorId);
                if (errorElement) {
                  errorElement.style.display = 'block';
                }
                isValid = false;
              }
            });

            // 验证身份证号格式
            const idNumber = document.getElementById('idNumber').value;
            if (
              idNumber &&
              !/^[1-9]\d{5}(18|19|20)\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])\d{3}[\dXx]$/.test(
                idNumber,
              )
            ) {
              document.getElementById('idNumberError').style.display = 'block';
              isValid = false;
            }

            // 验证联系方式格式
            const contact = document.getElementById('contact').value;
            if (contact && !/^1[3-9]\d{9}$/.test(contact)) {
              document.getElementById('contactError').style.display = 'block';
              isValid = false;
            }

            // 验证籍贯格式
            const nativePlace = document.getElementById('nativePlace').value;
            if (nativePlace && !/^.+省.+县$|^.+省.+市.+区$/.test(nativePlace)) {
              document.getElementById('nativePlaceError').style.display =
                'block';
              isValid = false;
            }

            // 验证教育经历至少有一条
            const educationRows = document.querySelectorAll(
              '#educationBackground tbody tr',
            );
            if (educationRows.length === 0) {
              document.getElementById('educationError').style.display = 'block';
              isValid = false;
            }

            // 验证教育经历连贯性
            let prevEndDate = null;
            for (let i = 0; i < educationRows.length; i++) {
              const startDate =
                educationRows[i].querySelector('.startDate').value;
              const endDate = educationRows[i].querySelector('.endDate').value;

              if (prevEndDate && startDate < prevEndDate) {
                document.getElementById(
                  'educationContinuityError',
                ).style.display = 'block';
                isValid = false;
                break;
              }

              prevEndDate = endDate;
            }

            // 验证家庭成员至少两位
            const familyRows = document.querySelectorAll(
              '#familyMembers tbody tr',
            );
            if (familyRows.length < 2) {
              document.getElementById('familyError').style.display = 'block';
              isValid = false;
            }

            // 显示验证结果
            const resultMessage = document.getElementById('resultMessage');
            resultMessage.style.display = 'block';

            if (isValid) {
              resultMessage.className = 'result success';
              resultMessage.textContent =
                '填写正确！您可以按照此内容填写纸质版学籍卡。';
            } else {
              resultMessage.className = 'result warning';
              resultMessage.textContent = '填写有误，请根据红色提示修改。';
            }

            // 滚动到结果位置
            resultMessage.scrollIntoView({ behavior: 'smooth' });
          });

        // 自动计算总分
        document.addEventListener('input', function (e) {
          if (e.target.classList.contains('score')) {
            calculateTotalScore();
          }
        });

        function calculateTotalScore() {
          const scores = document.querySelectorAll('.score');
          let total = 0;

          scores.forEach((score) => {
            if (score.value) {
              total += parseFloat(score.value);
            }
          });

          document.getElementById('totalScore').value = total;
        }

        // 设置入学日期默认值为2024-09-14
        document.getElementById('enrollmentDate').value = '2024-09-14';
      });
    </script>
  </body>
</html>
